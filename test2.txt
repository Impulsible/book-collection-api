# =============================================================================
# WEEK 03 PROJECT - COMPLETE WORKING TEST SCRIPT
# All operations now working including UPDATE!
# =============================================================================

# 1. Health Check & Initial State
curl.exe http://localhost:3000/health
curl.exe http://localhost:3000/api/books

# 2. CREATE Books
curl.exe -X POST http://localhost:3000/api/books -H "Content-Type: application/json" -d "@Book1.json"
curl.exe -X POST http://localhost:3000/api/books -H "Content-Type: application/json" -d "@Book2.json"

# 3. Verify CREATE
curl.exe http://localhost:3000/api/books

# 4. UPDATE Book (with full data)
curl.exe -X PUT http://localhost:3000/api/books/69203ed984a511733aa69a7f -H "Content-Type: application/json" -d "{\"title\":\"Updated Title\",\"author\":\"Updated Author\",\"isbn\":\"9780743273565\",\"publicationYear\":2024,\"genre\":\"Fiction\",\"publisher\":\"Updated Pub\",\"pageCount\":500}"

# 5. Data Validation Tests
curl.exe -X POST http://localhost:3000/api/books -H "Content-Type: application/json" -d "{\"title\":\"Test Book\"}"

# 6. Error Handling Tests
curl.exe http://localhost:3000/api/books/507f1f77bcf86cd799439011
curl.exe http://localhost:3000/api/books/adfre34578ert23111890hj

# 7. DELETE Operations
curl.exe -X DELETE http://localhost:3000/api/books/69203ee684a511733aa69a81

# 8. Verify Final State
curl.exe http://localhost:3000/api/books

# 9. Live Deployment
curl.exe https://book-collection-api-0vgp.onrender.com/health
curl.exe -X POST https://book-collection-api-0vgp.onrender.com/api/books -H "Content-Type: application/json" -d "@book1.json"
curl.exe https://book-collection-api-0vgp.onrender.com/api/books

# Cleanup
Remove-Item "book1.json","book2.json" -ErrorAction SilentlyContinue